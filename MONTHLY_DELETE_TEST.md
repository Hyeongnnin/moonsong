# 월별 근로기록 삭제 기능 - 테스트 시나리오

## 테스트 준비
1. 로그인 후 대시보드로 이동
2. 근로정보가 있는 상태에서 테스트 (없으면 먼저 생성)

## 테스트 케이스

### TC-001: 실제 근로기록 삭제
**목적**: WorkRecord만 있는 월의 삭제 동작 확인

**사전 조건**:
- 2025년 11월에 실제 근로기록이 여러 건 있음
- 월별 스케줄 설정은 없음

**테스트 단계**:
1. 캘린더에서 2025년 11월로 이동
2. 주황색으로 표시된 날짜들 확인 (예: 8일)
3. "🗑️ 월별 기록 삭제" 버튼 클릭
4. 확인 다이얼로그의 내용 확인:
   - "2025년 11월의 모든 근로 기록을 삭제하시겠습니까?"
   - "• 실제 근로기록 (WorkRecord)"
   - "• 월별 스케줄 설정 (MonthlySchedule)"
5. "확인" 클릭

**예상 결과**:
- ✅ 성공 메시지: "2025년 11월의 근로기록 8건이 삭제되었습니다."
- ✅ 캘린더에서 주황색 날짜 모두 사라짐
- ✅ 우측 통계 "총 근로시간": 0시간
- ✅ 우측 통계 "예상 급여": 0원
- ✅ **알바 업적 카드의 "총 근로시간" 감소 (새로고침 없이)**
- ✅ 페이지 새로고침 없이 모든 변경사항 반영

---

### TC-002: 월별 스케줄 포함 삭제
**목적**: WorkRecord + MonthlySchedule 모두 삭제 확인

**사전 조건**:
1. 2025년 11월에 실제 근로기록 있음
2. "월별 스케줄 변경"으로 11월의 근무 스케줄을 변경함

**테스트 단계**:
1. 캘린더에서 2025년 11월로 이동
2. "🗑️ 월별 기록 삭제" 버튼 클릭
3. "확인" 클릭

**예상 결과**:
- ✅ 성공 메시지: "2025년 11월의 근로기록 X건, 월별 스케줄 Y건이 삭제되었습니다."
- ✅ 실제 근로기록 삭제
- ✅ 월별 스케줄 설정 삭제 (기본 주간 스케줄로 복귀)
- ✅ 캘린더 색상이 주간 스케줄 기준으로 변경
- ✅ 알바 업적 자동 업데이트

---

### TC-003: 빈 월 삭제 시도
**목적**: 삭제할 데이터가 없을 때의 동작 확인

**사전 조건**:
- 2025년 12월에 아무 데이터도 없음

**테스트 단계**:
1. 캘린더에서 2025년 12월로 이동
2. "🗑️ 월별 기록 삭제" 버튼 클릭
3. "확인" 클릭

**예상 결과**:
- ✅ 메시지: "2025년 12월에는 삭제할 데이터가 없습니다."
- ✅ 에러 없이 정상 처리
- ✅ 화면 상태 변화 없음

---

### TC-004: 미래 월 차단
**목적**: 미래 월 삭제 방지 기능 확인

**사전 조건**:
- 현재가 2025년 12월
- 2026년 1월로 이동

**테스트 단계**:
1. 캘린더에서 2026년 1월로 이동
2. "🗑️ 월별 기록 삭제" 버튼 상태 확인

**예상 결과**:
- ✅ 버튼이 비활성화됨 (회색으로 표시)
- ✅ 마우스 오버 시 툴팁: "미래 월의 기록은 삭제할 수 없습니다"
- ✅ 클릭해도 동작하지 않음

---

### TC-005: 삭제 취소
**목적**: 확인 다이얼로그에서 취소 시 동작 확인

**사전 조건**:
- 2025년 11월에 데이터 있음

**테스트 단계**:
1. "🗑️ 월별 기록 삭제" 버튼 클릭
2. 확인 다이얼로그에서 "취소" 클릭

**예상 결과**:
- ✅ 아무 동작도 실행되지 않음
- ✅ 데이터 그대로 유지
- ✅ 다이얼로그 닫힘

---

### TC-006: 누적 통계 실시간 업데이트
**목적**: 알바 업적 카드가 새로고침 없이 업데이트되는지 확인

**사전 조건**:
1. 우측 사이드바의 "알바 업적" 카드 확인
2. 현재 "총 근로시간": 116.0시간
3. 2025년 11월에 72시간의 근로기록 있음

**테스트 단계**:
1. 알바 업적 카드의 초기 값 기록
2. 캘린더에서 2025년 11월의 모든 기록 삭제
3. **페이지 새로고침 하지 않고** 알바 업적 카드 확인

**예상 결과**:
- ✅ "총 근로시간": 116.0 → 44.0시간 (72시간 감소)
- ✅ "총 누적 급여": 적절히 감소
- ✅ "총 근무 일수": 적절히 감소
- ✅ 업적 레벨 변경 (필요 시)
- ✅ **새로고침 없이 즉시 반영**

---

### TC-007: 삭제 중 중복 클릭 방지
**목적**: 삭제 진행 중 버튼 재클릭 방지 확인

**테스트 단계**:
1. "🗑️ 월별 기록 삭제" 버튼 클릭
2. 확인 후 API 요청 진행 중 버튼 상태 확인
3. 다시 클릭 시도

**예상 결과**:
- ✅ 삭제 진행 중 버튼 비활성화
- ✅ 중복 클릭 불가
- ✅ 삭제 완료 후 버튼 다시 활성화

---

### TC-008: 다른 월로 이동 후 삭제
**목적**: 월 이동 후 올바른 월이 삭제되는지 확인

**테스트 단계**:
1. 2025년 10월로 이동
2. 10월 데이터 확인
3. 2025년 11월로 이동
4. "월별 기록 삭제" 실행

**예상 결과**:
- ✅ 11월 데이터만 삭제됨
- ✅ 10월 데이터는 그대로 유지
- ✅ 올바른 월이 삭제되었다는 메시지

---

## 통합 테스트 시나리오

### 시나리오 A: 완전 삭제 및 재입력
1. 2025년 11월 모든 데이터 삭제
2. 통계가 0이 되는 것 확인
3. 새로운 근로기록 입력
4. 통계가 다시 증가하는 것 확인

### 시나리오 B: 여러 월 연속 삭제
1. 2025년 9월 삭제
2. 2025년 10월 삭제
3. 2025년 11월 삭제
4. 알바 업적이 올바르게 감소하는지 확인

---

## 버그 리포트 템플릿

**발견한 버그가 있다면 아래 양식으로 작성해주세요:**

```
제목: [월별 삭제] 간단한 버그 설명

환경:
- 브라우저: 
- 날짜/시간:

재현 단계:
1. 
2. 
3. 

예상 결과:


실제 결과:


스크린샷:
(가능하면 첨부)
```

---

## 체크리스트

삭제 기능이 올바르게 동작하는지 확인:

- [ ] TC-001: 실제 근로기록 삭제
- [ ] TC-002: 월별 스케줄 포함 삭제
- [ ] TC-003: 빈 월 삭제 시도
- [ ] TC-004: 미래 월 차단
- [ ] TC-005: 삭제 취소
- [ ] TC-006: 누적 통계 실시간 업데이트
- [ ] TC-007: 삭제 중 중복 클릭 방지
- [ ] TC-008: 다른 월로 이동 후 삭제

모든 테스트 통과 시: ✅ **기능 정상 동작**
