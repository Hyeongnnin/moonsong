# ì†Œì •ê·¼ë¡œì¼ ì¤‘ì‹¬ êµ¬ì¡° ê°œí¸ (Phase 1)

## ğŸ“‹ ê°œìš”

ê¸°ì¡´ ì‹œìŠ¤í…œì€ ì£¼ê°„/ì›”ë³„/ì¼ë³„ ê·¼ë¡œê¸°ë¡ì´ ëª¨ë‘ "ê·¼ë¡œì‹œê°„ì„ ìº˜ë¦°ë”ì— ê¸°ë¡í•˜ëŠ”" ë™ì¼í•œ ì—­í• ë¡œ ë™ì‘í•˜ì—¬, ì†Œì •ê·¼ë¡œì¼ê³¼ ì¶”ê°€ê·¼ë¬´ë¥¼ êµ¬ë¶„í•  ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ì£¼íœ´ìˆ˜ë‹¹Â·ì—°ì°¨ìœ ê¸‰íœ´ê°€ ê³„ì‚°ì´ ë²•ì ìœ¼ë¡œ ë¶ˆì•ˆì •í•œ ìƒíƒœì˜€ìŠµë‹ˆë‹¤.

ì´ë²ˆ ê°œí¸ì—ì„œëŠ” **ì†Œì •ê·¼ë¡œì¼ ê°œë…ì„ ë„ì…**í•˜ë˜, ì‚¬ìš©ìê°€ ë³µì¡í•œ ì²´í¬ë‚˜ ë²• ê°œë…ì„ ì§ì ‘ ì…ë ¥í•˜ì§€ ì•Šë„ë¡ í•˜ê³ , ìŠ¤íƒ€ë²…ìŠ¤ì²˜ëŸ¼ ì£¼/ì›” ë‹¨ìœ„ë¡œ ê·¼ë¬´ì¼ì´ ìœ ë™ì ì¸ í˜•íƒœë„ ìì—°ìŠ¤ëŸ½ê²Œ ì§€ì›í•©ë‹ˆë‹¤.

## ğŸ¯ í•µì‹¬ ì›ì¹™

### 1. ì†Œì •ê·¼ë¡œì¼ì€ ì‹œìŠ¤í…œì´ ìë™ íŒì •
- âŒ ì‚¬ìš©ìê°€ ì²´í¬ë°•ìŠ¤ë¡œ "ì†Œì •ê·¼ë¡œì¼ì…ë‹ˆë‹¤" ì„ íƒí•˜ì§€ ì•ŠìŒ
- âœ… ì‚¬ì „ì— í™•ì •ëœ ìŠ¤ì¼€ì¤„(ì£¼ê°„/ì›”ë³„)ë¡œë¶€í„° ì‹œìŠ¤í…œì´ ìë™ íŒì •

### 2. ê·¼ë¡œì˜ ì„±ê²©ë§Œ ìµœì†Œí•œìœ¼ë¡œ êµ¬ë¶„
- ê¸°ì¡´ ê·¼ë¡œì‹œê°„ ì…ë ¥ ë°©ì‹(ì£¼ê°„/ì›”ë³„/ì¼ë³„) ìœ ì§€
- ì¶œê²° ìƒíƒœë§Œ í™•ì¥: ê·¼ë¬´(ì†Œì •ê·¼ë¡œ), ì¶”ê°€ê·¼ë¬´, ì—°ì°¨ì‚¬ìš©, ê²°ê·¼, ë³‘ê°€

### 3. ìŠ¤ì¼€ì¤„ ìš°ì„ ìˆœìœ„
1. **ì›”ë³„ ìŠ¤ì¼€ì¤„ ë³€ê²½** (ìµœìš°ì„ ) - í•´ë‹¹ ì›”ì˜ 'í™•ì •ëœ ê·¼ë¬´í‘œ'
2. **ì£¼ê°„ê·¼ë¬´ìŠ¤ì¼€ì¤„** (ê¸°ë³¸) - ê¸°ë³¸ ê·¼ë¬´ íŒ¨í„´(í…œí”Œë¦¿, ì„ íƒì‚¬í•­)

## ğŸ“ ê°œë… ì •ì˜

### ì†Œì •ê·¼ë¡œì¼ (Scheduled Workday)
í•´ë‹¹ ë‚ ì§œê°€ ë‹¤ìŒ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê²½ìš°:
1. ì›”ë³„ ìŠ¤ì¼€ì¤„ì—ì„œ í™œì„±í™”ë˜ì–´ ìˆê±°ë‚˜
2. (ì›”ë³„ ìŠ¤ì¼€ì¤„ì´ ì—†ì„ ê²½ìš°) ì£¼ê°„ê·¼ë¬´ìŠ¤ì¼€ì¤„ì—ì„œ 'ì¼í•˜ëŠ” ë‚ 'ë¡œ ì„¤ì •ëœ ê²½ìš°

**â€» ì¤‘ìš”: ì‹¤ì œ ì¶œê·¼ ì—¬ë¶€ì™€ ë¬´ê´€í•˜ë©°, ê·¼ë¬´í‘œ ê¸°ì¤€ìœ¼ë¡œë§Œ ê²°ì •ë©ë‹ˆë‹¤.**

### ì¶œê²° ìƒíƒœ (Attendance Status)
```python
ATTENDANCE_STATUS_CHOICES = [
    ('REGULAR_WORK', 'ê·¼ë¬´(ì†Œì •ê·¼ë¡œ)'),    # ì†Œì •ê·¼ë¡œì¼ì— ì •ìƒ ì¶œê·¼
    ('EXTRA_WORK', 'ì¶”ê°€ê·¼ë¬´'),            # ëŒ€íƒ€, ë³´ì¶©ê·¼ë¬´ ë“± ë¹„ì†Œì •ê·¼ë¡œì¼ ê·¼ë¬´
    ('ANNUAL_LEAVE', 'ì—°ì°¨ì‚¬ìš©'),          # ìœ ê¸‰íœ´ê°€
    ('ABSENT', 'ê²°ê·¼'),                    # ë¬´ë‹¨ ê²°ê·¼
    ('SICK_LEAVE', 'ë³‘ê°€'),                # ë³‘ê°€
]
```

## ğŸ—ï¸ êµ¬í˜„ ë‚´ìš©

### 1. ë°ì´í„°ë² ì´ìŠ¤ ë³€ê²½

#### WorkRecord ëª¨ë¸ì— í•„ë“œ ì¶”ê°€
```python
# labor/models.py

class WorkRecord(models.Model):
    # ... ê¸°ì¡´ í•„ë“œ ...
    
    # ì†Œì •ê·¼ë¡œì¼ ì¤‘ì‹¬ êµ¬ì¡°: ì¶œê²° ìƒíƒœ í™•ì¥
    ATTENDANCE_STATUS_CHOICES = [
        ('REGULAR_WORK', 'ê·¼ë¬´(ì†Œì •ê·¼ë¡œ)'),
        ('EXTRA_WORK', 'ì¶”ê°€ê·¼ë¬´'),
        ('ANNUAL_LEAVE', 'ì—°ì°¨ì‚¬ìš©'),
        ('ABSENT', 'ê²°ê·¼'),
        ('SICK_LEAVE', 'ë³‘ê°€'),
    ]
    attendance_status = models.CharField(
        max_length=20, 
        choices=ATTENDANCE_STATUS_CHOICES, 
        default='REGULAR_WORK',
        help_text="ì¶œê²° ìƒíƒœ (ì†Œì •ê·¼ë¡œ/ì¶”ê°€ê·¼ë¬´/ì—°ì°¨/ê²°ê·¼/ë³‘ê°€)"
    )
    
    # ê¸°ì¡´ attendance_typeì€ í•˜ìœ„ í˜¸í™˜ì„±ì„ ìœ„í•´ ìœ ì§€ (deprecated)
```

#### ë§ˆì´ê·¸ë ˆì´ì…˜
```bash
python3 manage.py makemigrations labor --name add_attendance_status_field
python3 manage.py migrate labor
```

### 2. Employee ëª¨ë¸ì— í—¬í¼ ë©”ì†Œë“œ ì¶”ê°€

#### is_scheduled_workday(target_date)
íŠ¹ì • ë‚ ì§œê°€ ì†Œì •ê·¼ë¡œì¼ì¸ì§€ íŒì •í•©ë‹ˆë‹¤.

```python
# labor/models.py

def is_scheduled_workday(self, target_date):
    """íŠ¹ì • ë‚ ì§œê°€ ì†Œì •ê·¼ë¡œì¼ì¸ì§€ íŒì •
    
    íŒì • ê¸°ì¤€ (ìš°ì„ ìˆœìœ„ ìˆœ):
    1. í•´ë‹¹ ì›”ì˜ MonthlyScheduleì´ ìˆìœ¼ë©´ ê·¸ê²ƒ ê¸°ì¤€
    2. ì—†ìœ¼ë©´ WorkSchedule(ì£¼ê°„ ìŠ¤ì¼€ì¤„) ê¸°ì¤€
    
    Returns:
        bool: ì†Œì •ê·¼ë¡œì¼ ì—¬ë¶€
    """
    year = target_date.year
    month = target_date.month
    weekday = target_date.weekday()
    
    # 1. ì›”ë³„ ìŠ¤ì¼€ì¤„ í™•ì¸ (ìµœìš°ì„ )
    monthly_schedule = MonthlySchedule.objects.filter(
        employee=self,
        year=year,
        month=month,
        weekday=weekday,
        enabled=True
    ).first()
    
    if monthly_schedule:
        return monthly_schedule.start_time is not None and monthly_schedule.end_time is not None
    
    # 2. ì£¼ê°„ ìŠ¤ì¼€ì¤„ í™•ì¸
    weekly_schedule = WorkSchedule.objects.filter(
        employee=self,
        weekday=weekday,
        enabled=True
    ).first()
    
    if weekly_schedule:
        return weekly_schedule.start_time is not None and weekly_schedule.end_time is not None
    
    return False
```

#### get_schedule_for_date(target_date)
íŠ¹ì • ë‚ ì§œì˜ ìŠ¤ì¼€ì¤„ ì •ë³´(ì‹œê°„ í¬í•¨)ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

```python
def get_schedule_for_date(self, target_date):
    """íŠ¹ì • ë‚ ì§œì˜ ìŠ¤ì¼€ì¤„ ì •ë³´ ë°˜í™˜ (ì‹œê°„ í¬í•¨)
    
    Returns:
        dict: {
            'is_scheduled': bool,
            'start_time': time,
            'end_time': time,
            'break_minutes': int,
            'is_overnight': bool,
            'next_day_work_minutes': int
        }
    """
    # 1. ì›”ë³„ ìŠ¤ì¼€ì¤„ ìš°ì„ 
    # 2. ì£¼ê°„ ìŠ¤ì¼€ì¤„
    # 3. ìŠ¤ì¼€ì¤„ ì—†ìŒ
```

### 3. API ë³€ê²½

#### WorkRecordSerializerì— ì†Œì •ê·¼ë¡œì¼ ì •ë³´ ì¶”ê°€

```python
# labor/serializers.py

class WorkRecordSerializer(serializers.ModelSerializer):
    total_hours = serializers.SerializerMethodField()
    is_scheduled_workday = serializers.SerializerMethodField()  # ì¶”ê°€
    schedule_info = serializers.SerializerMethodField()          # ì¶”ê°€

    class Meta:
        model = WorkRecord
        fields = [
            'id', 'employee', 'work_date', 'time_in', 'time_out', 
            'is_overnight', 'next_day_work_minutes', 'break_minutes',
            'day_type', 'attendance_type', 'attendance_status',  # attendance_status ì¶”ê°€
            'total_hours', 'is_overtime', 'is_night', 'is_holiday',
            'is_scheduled_workday', 'schedule_info'  # ì¶”ê°€
        ]

    def get_is_scheduled_workday(self, obj):
        """í•´ë‹¹ ë‚ ì§œê°€ ì†Œì •ê·¼ë¡œì¼ì¸ì§€ ì—¬ë¶€"""
        return obj.employee.is_scheduled_workday(obj.work_date)
    
    def get_schedule_info(self, obj):
        """í•´ë‹¹ ë‚ ì§œì˜ ìŠ¤ì¼€ì¤„ ì •ë³´ (ê¸°ë³¸ê°’ ì°¸ì¡°ìš©)"""
        return obj.employee.get_schedule_for_date(obj.work_date)
```

#### date-schedule ì—”ë“œí¬ì¸íŠ¸ ê°œì„ 

**ê¸°ì¡´:**
```python
GET /api/labor/jobs/<id>/date-schedule/?date=YYYY-MM-DD
ì‘ë‹µ: {
    'has_schedule': true/false,
    'start_time': "13:00",
    'end_time': "19:00",
    'work_record': {...}
}
```

**ê°œì„  í›„:**
```python
GET /api/labor/jobs/<id>/date-schedule/?date=YYYY-MM-DD
ì‘ë‹µ: {
    'is_scheduled_workday': true,              # ì†Œì •ê·¼ë¡œì¼ ì—¬ë¶€ (ì¶”ê°€)
    'has_schedule': true,
    'start_time': "13:00",
    'end_time': "19:00",
    'break_minutes': 60,
    'is_overnight': false,
    'next_day_work_minutes': 0,
    'work_record': {...},
    'suggested_attendance_status': "REGULAR_WORK"  # ê¸°ë³¸ê°’ ì œì•ˆ (ì¶”ê°€)
}
```

#### WorkRecord ìƒì„± ì‹œ ìë™ ì„¤ì •

```python
# labor/views.py - WorkRecordViewSet.perform_create()

# attendance_statusê°€ ì—†ìœ¼ë©´ ì†Œì •ê·¼ë¡œì¼ ì—¬ë¶€ì— ë”°ë¼ ìë™ ì„¤ì •
if 'attendance_status' not in self.request.data:
    is_scheduled = employee.is_scheduled_workday(work_date)
    default_status = 'REGULAR_WORK' if is_scheduled else 'EXTRA_WORK'
    serializer.validated_data['attendance_status'] = default_status
```

## ğŸ¨ í”„ë¡ íŠ¸ì—”ë“œ ìš”êµ¬ì‚¬í•­

### 1. ìº˜ë¦°ë” ë‚ ì§œ í´ë¦­ ì‹œ ë‘ ê°€ì§€ ìˆ˜ì • ê²½ë¡œ ì œê³µ

#### (1) ê·¼ë¬´í‘œ ìˆ˜ì •í•˜ê¸° (ì˜ˆì • ë³€ê²½)
- **ì˜ë¯¸**: ì†Œì •ê·¼ë¡œì¼ / ì†Œì •ê·¼ë¡œì‹œê°„ ë³€ê²½
- **ì˜í–¥**: 
  - ì›”ë³„ ìŠ¤ì¼€ì¤„(ê·¼ë¬´í‘œ) ë°ì´í„° ìˆ˜ì •
  - ì£¼íœ´ìˆ˜ë‹¹Â·ì—°ì°¨ìœ ê¸‰íœ´ê°€ íŒë‹¨ ê¸°ì¤€ì— ì§ì ‘ ì˜í–¥
- **ìˆ˜ì • í•­ëª©**:
  - í•´ë‹¹ ë‚ ì§œì˜ ì¶œê·¼/í‡´ê·¼ ì‹œê°„
  - ê·¼ë¬´ ì—¬ë¶€ ìì²´ (í™œì„±/ë¹„í™œì„±)

#### (2) ì‹¤ì œ ê·¼ë¡œ ìˆ˜ì •í•˜ê¸° (ê²°ê³¼ ê¸°ë¡)
- **ì˜ë¯¸**: ê·¼ë¬´í‘œëŠ” ìœ ì§€í•œ ì±„, ì‹¤ì œ ê·¼ë¡œ ê²°ê³¼ë§Œ ìˆ˜ì •
- **í¬í•¨ í•­ëª©**:
  - **A) ê·¼ë¡œ ìƒíƒœ (ì¶œê²° ìƒíƒœ)**:
    - ê·¼ë¬´(ì†Œì •ê·¼ë¡œ)
    - ì¶”ê°€ê·¼ë¬´(ëŒ€íƒ€/ë³´ì¶©ê·¼ë¬´)
    - ì—°ì°¨ì‚¬ìš©
    - ê²°ê·¼
    - ë³‘ê°€
  - **B) ì‹¤ì œ ê·¼ë¡œì‹œê°„**:
    - ì‹¤ì œ ì¶œê·¼ ì‹œê°„
    - ì‹¤ì œ í‡´ê·¼ ì‹œê°„
    - íœ´ê²Œì‹œê°„(ë¶„)
    - ìµì¼ ê·¼ë¬´ì‹œê°„ (24:00~06:00)
- **ê¸°ë³¸ê°’**: ê·¼ë¬´í‘œì˜ ì‹œê°„ìœ¼ë¡œ ìë™ ì„¸íŒ…
- **ê³„ì‚°**: ì—°ì¥/ì•¼ê°„/ì¶”ê°€ê·¼ë¬´ íŒë‹¨ì€ ì‹¤ì œ ê·¼ë¡œì‹œê°„ ê¸°ì¤€

### 2. ì†Œì •ê·¼ë¡œì¼ ì•ˆë‚´ ë¬¸êµ¬

âŒ **í•˜ì§€ ë§ ê²ƒ:**
```html
<input type="checkbox" v-model="isScheduledWorkday"> ì†Œì •ê·¼ë¡œì¼ì…ë‹ˆë‹¤
```

âœ… **í•´ì•¼ í•  ê²ƒ:**
```html
<div v-if="scheduleInfo.is_scheduled_workday" class="text-sm text-blue-600">
  â„¹ï¸ ì´ ë‚ ì§œëŠ” ì†Œì •ê·¼ë¡œì¼ì…ë‹ˆë‹¤ (ê·¼ë¬´í‘œì— ë“±ë¡ëœ ë‚ )
</div>
<div v-else class="text-sm text-gray-500">
  â„¹ï¸ ì´ ë‚ ì§œëŠ” ì†Œì •ê·¼ë¡œì¼ì´ ì•„ë‹™ë‹ˆë‹¤ (ì¶”ê°€ê·¼ë¬´ë¡œ ê¸°ë¡ë©ë‹ˆë‹¤)
</div>
```

### 3. ì¶œê²° ìœ í˜• ì„ íƒ ê¸°ë³¸ê°’

```javascript
// ì†Œì •ê·¼ë¡œì¼ â†’ ê·¼ë¬´(ì†Œì •ê·¼ë¡œ)
// ë¹„ì†Œì •ê·¼ë¡œì¼ â†’ ì¶”ê°€ê·¼ë¬´
const defaultAttendanceStatus = computed(() => {
  return scheduleInfo.value.is_scheduled_workday ? 'REGULAR_WORK' : 'EXTRA_WORK'
})
```

### 4. ìº˜ë¦°ë” UI ì‹œê°ì  í‘œí˜„

| ìƒíƒœ | ì‹œê°ì  í‘œí˜„ | ì„¤ëª… |
|------|------------|------|
| ì†Œì •ê·¼ë¡œì¼ + ì‹¤ì œ ì¶œê·¼ | ì£¼í™©ìƒ‰ ì±„ì›€ | ê¸°ì¡´ê³¼ ë™ì¼ |
| ì†Œì •ê·¼ë¡œì¼ì´ì§€ë§Œ ë¯¸ì¶œê·¼ (ê²°ê·¼/ë³‘ê°€/ì—°ì°¨) | ì£¼í™©ìƒ‰ í…Œë‘ë¦¬ë§Œ | ë‚ ì§œ ìˆ«ì í•˜ë‹¨ì— ìƒíƒœ í…ìŠ¤íŠ¸ í‘œì‹œ |
| ë¹„ì†Œì •ê·¼ë¡œì¼ì¸ë° ì‹¤ì œ ê·¼ë¡œ (ì¶”ê°€ê·¼ë¬´/ëŒ€íƒ€) | ë³„ë„ ìƒ‰ìƒ (ì˜ˆ: ì—°í•œ ë…¹ìƒ‰) | ê¸°ì¡´ ì£¼í™©ìƒ‰ê³¼ êµ¬ë¶„ |
| ì†Œì •ê·¼ë¡œì¼ë„ ì•„ë‹ˆê³  ê·¼ë¡œë„ ì—†ìŒ | ê¸°ë³¸ ìŠ¤íƒ€ì¼ | íšŒìƒ‰ ë˜ëŠ” í°ìƒ‰ |

**ì˜ˆì‹œ êµ¬í˜„:**
```vue
<div 
  :class="{
    'bg-orange-400': record && isWorked(record),
    'border-2 border-orange-400': !record && isScheduledWorkday,
    'bg-green-200': record && !isScheduledWorkday && isWorked(record),
    'bg-white': !record && !isScheduledWorkday
  }"
>
  <span class="text-lg">{{ day }}</span>
  <div v-if="!record && isScheduledWorkday" class="text-xs text-gray-500">
    {{ getStatusText(record) }}
  </div>
</div>
```

## ğŸ§® ë°±ì—”ë“œ ê³„ì‚° ë¡œì§ ë¶„ë¦¬ ì›ì¹™

### 1. ì†Œì •ê·¼ë¡œì¼ ì—¬ë¶€
**ê¸°ì¤€**: ê·¼ë¬´í‘œ (WorkSchedule / MonthlySchedule)
```python
is_scheduled = employee.is_scheduled_workday(target_date)
```

### 2. ê°œê·¼/ì¶œê·¼ìœ¨ íŒë‹¨
**ê¸°ì¤€**: ì‹¤ì œ ê·¼ë¡œ ìƒíƒœ (WorkRecord.attendance_status)

```python
# ì¶œê·¼ ì¸ì •: REGULAR_WORK + ANNUAL_LEAVEë§Œ
def is_attendance(work_record):
    return work_record.attendance_status in ['REGULAR_WORK', 'ANNUAL_LEAVE']

# ê°œê·¼ íŒë‹¨
perfect_attendance = all(
    is_attendance(record) 
    for date in scheduled_dates 
    if (record := get_work_record(date))
)
```

**ì¤‘ìš”**: 
- âœ… `REGULAR_WORK` (ê·¼ë¬´) â†’ ì¶œê·¼ ì¸ì •
- âœ… `ANNUAL_LEAVE` (ì—°ì°¨ì‚¬ìš©) â†’ ì¶œê·¼ ì¸ì •
- âŒ `EXTRA_WORK` (ì¶”ê°€ê·¼ë¬´) â†’ ê°œê·¼ íŒë‹¨ì—ì„œ ì œì™¸
- âŒ `ABSENT` (ê²°ê·¼) â†’ ê°œê·¼ íŒë‹¨ì—ì„œ ì œì™¸
- âŒ `SICK_LEAVE` (ë³‘ê°€) â†’ ê°œê·¼ íŒë‹¨ì—ì„œ ì œì™¸

### 3. ê·¼ë¡œì‹œê°„ í•©ì‚° / ê¸‰ì—¬ / í†µê³„
**ê¸°ì¤€**: ì‹¤ì œ ê·¼ë¡œì‹œê°„ (WorkRecord.get_total_hours())

```python
# ëª¨ë“  ê·¼ë¡œ ìœ í˜• í•©ì‚° (REGULAR_WORK + EXTRA_WORK)
total_hours = sum(
    record.get_total_hours() 
    for record in work_records 
    if record.attendance_status in ['REGULAR_WORK', 'EXTRA_WORK']
)

total_pay = total_hours * hourly_rate
```

### 4. ì£¼íœ´ìˆ˜ë‹¹ ê³„ì‚°

**ê¸°ì¡´ (ë³€ê²½ ì „):**
```python
# ì‹¤ì œ ê·¼ë¬´ ì‹œê°„ ê¸°ì¤€
if actual_worked_hours >= 15:
    holiday_pay = daily_avg_hours * hourly_rate
```

**ë³€ê²½ í›„ (ì†Œì •ê·¼ë¡œì¼ ê°œê·¼ ê¸°ì¤€):**
```python
# 1. í•´ë‹¹ ì£¼ì˜ ì†Œì •ê·¼ë¡œì¼ ëª©ë¡ í™•ì¸
scheduled_dates = [
    date for date in week_dates 
    if employee.is_scheduled_workday(date)
]

# 2. ì†Œì •ê·¼ë¡œì¼ ê°œê·¼ ì—¬ë¶€ í™•ì¸
perfect_attendance = all(
    work_record and work_record.attendance_status in ['REGULAR_WORK', 'ANNUAL_LEAVE']
    for date in scheduled_dates
    if (work_record := get_work_record(date))
)

# 3. ì£¼ 15ì‹œê°„ ì´ìƒ + ê°œê·¼ ì‹œì—ë§Œ ì§€ê¸‰
if perfect_attendance and weekly_hours >= 15:
    holiday_pay = daily_avg_hours * hourly_rate
else:
    holiday_pay = 0
```

### 5. ì—°ì°¨ìœ ê¸‰íœ´ê°€ ê³„ì‚° (1ë…„ ë¯¸ë§Œ)

**ê¸°ì¡´ (ë³€ê²½ ì „):**
```python
# ì‹¤ì œ ê·¼ë¬´ ê¸°ë¡ ìˆ˜ë¡œ íŒë‹¨
if work_records_count >= len(scheduled_dates):
    perfect_months += 1
```

**ë³€ê²½ í›„ (ì†Œì •ê·¼ë¡œì¼ ê°œê·¼ ê¸°ì¤€):**
```python
# í•´ë‹¹ ì›”ì˜ ì†Œì •ê·¼ë¡œì¼ ëª©ë¡
scheduled_dates = [
    date for date in month_dates
    if employee.is_scheduled_workday(date)
]

# ê°œê·¼ ì—¬ë¶€ í™•ì¸ (REGULAR_WORK + ANNUAL_LEAVEë§Œ ì¸ì •)
perfect_attendance = all(
    work_record and work_record.attendance_status in ['REGULAR_WORK', 'ANNUAL_LEAVE']
    for date in scheduled_dates
    if (work_record := get_work_record(date))
)

if perfect_attendance:
    earned_days += 1  # ê°œê·¼í•œ ì›”ë§ˆë‹¤ 1ì¼ ë°œìƒ
```

## ğŸ“Š ë°ì´í„° íë¦„ ì˜ˆì‹œ

### ì‹œë‚˜ë¦¬ì˜¤: ì›”ìš”ì¼ ì¶œê·¼ ê¸°ë¡

#### 1. ìŠ¤ì¼€ì¤„ ì„¤ì • (ê·¼ë¬´í‘œ)
```
ì£¼ê°„ ìŠ¤ì¼€ì¤„: ì›”ìš”ì¼ 09:00~18:00 (íœ´ê²Œ 60ë¶„)
â†’ ëª¨ë“  ì›”ìš”ì¼ì´ ì†Œì •ê·¼ë¡œì¼ë¡œ ìë™ íŒì •
```

#### 2. ì‹¤ì œ ê·¼ë¡œ ê¸°ë¡
```
2025-01-06 (ì›”):
  - ì¶œê²° ìƒíƒœ: REGULAR_WORK (ê·¼ë¬´)
  - ì¶œê·¼: 09:00
  - í‡´ê·¼: 18:00
  - íœ´ê²Œ: 60ë¶„
  â†’ ì´ ê·¼ë¡œì‹œê°„: 8ì‹œê°„
  â†’ ê¸‰ì—¬ ë°˜ì˜: 8ì‹œê°„ Ã— ì‹œê¸‰
  â†’ ê°œê·¼ íŒë‹¨: âœ… ì¶œê·¼ ì¸ì •
```

#### 3. ì¶”ê°€ê·¼ë¬´ (ëŒ€íƒ€) ê¸°ë¡
```
2025-01-07 (í™”):
  - ìŠ¤ì¼€ì¤„: ì—†ìŒ (ì†Œì •ê·¼ë¡œì¼ ì•„ë‹˜)
  - ì¶œê²° ìƒíƒœ: EXTRA_WORK (ì¶”ê°€ê·¼ë¬´)
  - ì¶œê·¼: 14:00
  - í‡´ê·¼: 20:00
  - íœ´ê²Œ: 30ë¶„
  â†’ ì´ ê·¼ë¡œì‹œê°„: 5.5ì‹œê°„
  â†’ ê¸‰ì—¬ ë°˜ì˜: 5.5ì‹œê°„ Ã— ì‹œê¸‰
  â†’ ê°œê·¼ íŒë‹¨: âŒ ì†Œì •ê·¼ë¡œì¼ì´ ì•„ë‹ˆë¯€ë¡œ íŒë‹¨ ëŒ€ìƒ ì•„ë‹˜
```

#### 4. ì—°ì°¨ ì‚¬ìš©
```
2025-01-08 (ìˆ˜):
  - ìŠ¤ì¼€ì¤„: ìˆ˜ìš”ì¼ 09:00~18:00 (ì†Œì •ê·¼ë¡œì¼)
  - ì¶œê²° ìƒíƒœ: ANNUAL_LEAVE (ì—°ì°¨ì‚¬ìš©)
  - ì‹œê°„: ì…ë ¥ ì•ˆ í•¨
  â†’ ì´ ê·¼ë¡œì‹œê°„: 0ì‹œê°„
  â†’ ê¸‰ì—¬ ë°˜ì˜: 0ì› (ì—°ì°¨ëŠ” ë³„ë„ ê³„ì‚°)
  â†’ ê°œê·¼ íŒë‹¨: âœ… ì¶œê·¼ ì¸ì • (ìœ ê¸‰íœ´ê°€)
```

#### 5. ê²°ê·¼
```
2025-01-09 (ëª©):
  - ìŠ¤ì¼€ì¤„: ëª©ìš”ì¼ 09:00~18:00 (ì†Œì •ê·¼ë¡œì¼)
  - ì¶œê²° ìƒíƒœ: ABSENT (ê²°ê·¼)
  - ì‹œê°„: ì…ë ¥ ì•ˆ í•¨
  â†’ ì´ ê·¼ë¡œì‹œê°„: 0ì‹œê°„
  â†’ ê¸‰ì—¬ ë°˜ì˜: 0ì›
  â†’ ê°œê·¼ íŒë‹¨: âŒ ì¶œê·¼ ë¶ˆì¸ì •
  â†’ ì£¼íœ´ìˆ˜ë‹¹: ì´ë²ˆ ì£¼ëŠ” ë¯¸ì§€ê¸‰
```

## ğŸ¯ ìŠ¤íƒ€ë²…ìŠ¤í˜•(ìœ ë™ ìŠ¤ì¼€ì¤„) ì§€ì›

### ë§¤ì£¼ ê·¼ë¬´ ìš”ì¼ì´ ë‹¤ë¥¸ ê²½ìš°
```
1ì£¼ì°¨: ì›”, ìˆ˜, ê¸ˆ ê·¼ë¬´
2ì£¼ì°¨: í™”, ëª©, í†  ê·¼ë¬´
3ì£¼ì°¨: ì›”, ëª©, ì¼ ê·¼ë¬´
```

**í•´ê²° ë°©ë²•:**
- ì£¼ê°„ ìŠ¤ì¼€ì¤„ì„ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
- ë§¤ì£¼ ì›”ë³„ ìŠ¤ì¼€ì¤„ë¡œ ê·¼ë¬´í‘œë¥¼ ì‚¬ì „ ë“±ë¡
- ê° ì£¼ì˜ ì†Œì •ê·¼ë¡œì¼ì´ ìë™ìœ¼ë¡œ ë‹¤ë¥´ê²Œ íŒì •ë¨

### ì›”ë³„ë¡œ ê·¼ë¬´ íŒ¨í„´ì´ ë³€ê²½ë˜ëŠ” ê²½ìš°
```
1ì›”: ì›”~ê¸ˆ 09:00~18:00
2ì›”: í™”~í†  13:00~22:00
3ì›”: ì›”, ìˆ˜, ê¸ˆ 14:00~20:00
```

**í•´ê²° ë°©ë²•:**
- ê° ì›”ì— ëŒ€í•´ "ì´ë‹¬ë§Œ ìŠ¤ì¼€ì¤„ ë³€ê²½" ì‚¬ìš©
- MonthlyScheduleì´ ì£¼ê°„ ìŠ¤ì¼€ì¤„ë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë†’ìŒ
- ë²•ì  ê³„ì‚°(ì£¼íœ´ìˆ˜ë‹¹, ì—°ì°¨)ë„ ì›”ë³„ ìŠ¤ì¼€ì¤„ ê¸°ì¤€ìœ¼ë¡œ ì •í™•íˆ ê³„ì‚°ë¨

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. ë§ˆì´ê·¸ë ˆì´ì…˜ ìˆœì„œ
1. ë°±ì—”ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì ìš© (`python3 manage.py migrate labor`)
2. í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬
3. ê¸°ì¡´ WorkRecordì˜ `attendance_status`ëŠ” ê¸°ë³¸ê°’ `REGULAR_WORK`ë¡œ ì´ˆê¸°í™”ë¨

### 2. ê¸°ì¡´ ë°ì´í„° í˜¸í™˜ì„±
- `attendance_type` í•„ë“œëŠ” í•˜ìœ„ í˜¸í™˜ì„±ì„ ìœ„í•´ ìœ ì§€ (deprecated)
- ìƒˆë¡œìš´ ì½”ë“œëŠ” `attendance_status` í•„ë“œ ì‚¬ìš© ê¶Œì¥
- ê¸°ì¡´ APIëŠ” ì •ìƒ ë™ì‘ (ì‹ ê·œ í•„ë“œëŠ” optional)

### 3. ê°œê·¼ íŒë‹¨ ê¸°ì¤€ ë³€ê²½
- **ê¸°ì¡´**: ì‹¤ì œ ê·¼ë¬´ ê¸°ë¡ ì¡´ì¬ ì—¬ë¶€
- **ë³€ê²½ í›„**: ì†Œì •ê·¼ë¡œì¼ ê¸°ì¤€ + attendance_status í™•ì¸
- ì£¼íœ´ìˆ˜ë‹¹Â·ì—°ì°¨ ê³„ì‚° ë¡œì§ë„ ì´ì— ë”°ë¼ ì—…ë°ì´íŠ¸ í•„ìš”

## ğŸš€ Phase 2 ì™„ë£Œ ë‚´ì—­

### 1. ë°±ì—”ë“œ ê³„ì‚° ë¡œì§ ì—…ë°ì´íŠ¸ âœ…

#### holiday_pay() ì—”ë“œí¬ì¸íŠ¸
**ë³€ê²½ ì „:**
```python
# ì‹¤ì œ ê·¼ë¬´ ì‹œê°„ 15ì‹œê°„ ê¸°ì¤€
if actual_worked_hours >= 15:
    holiday_pay = daily_avg_hours * hourly_rate
```

**ë³€ê²½ í›„:**
```python
# ì†Œì •ê·¼ë¡œì¼ ê°œê·¼ + ì£¼ 15ì‹œê°„ ê¸°ì¤€
scheduled_dates = [ë‚ ì§œ for ë‚ ì§œ in í•´ë‹¹ì£¼ if is_scheduled_workday(ë‚ ì§œ)]
perfect_attendance = all(
    record.attendance_status in ['REGULAR_WORK', 'ANNUAL_LEAVE']
    for ë‚ ì§œ in scheduled_dates
)

if perfect_attendance and weekly_scheduled_hours >= 15:
    holiday_pay = daily_avg_hours * hourly_rate
else:
    holiday_pay = 0
```

**ì‘ë‹µ ë°ì´í„°:**
```json
{
  "amount": 12000,
  "hours": 8.0,
  "reason": "eligible",
  "weekly_scheduled_hours": 40.0,
  "scheduled_days_count": 5,
  "perfect_attendance": true,
  "attendance_details": [
    {
      "date": "2025-12-15",
      "is_scheduled": true,
      "attendance_status": "REGULAR_WORK",
      "is_attended": true,
      "hours": 8.0
    }
  ]
}
```

#### annual_leave_summary() ì—”ë“œí¬ì¸íŠ¸
**ë³€ê²½ ì „:**
```python
# ì‹¤ì œ ê·¼ë¬´ ê¸°ë¡ ìˆ˜ë¡œ ê°œê·¼ íŒë‹¨
if work_records_count >= scheduled_dates_count:
    perfect_months += 1
```

**ë³€ê²½ í›„:**
```python
# ì†Œì •ê·¼ë¡œì¼ë³„ ì¶œê²° ìƒíƒœ í™•ì¸
scheduled_dates = [ë‚ ì§œ for ë‚ ì§œ in í•´ë‹¹ì›” if is_scheduled_workday(ë‚ ì§œ)]
perfect_attendance = all(
    record and record.attendance_status in ['REGULAR_WORK', 'ANNUAL_LEAVE']
    for ë‚ ì§œ in scheduled_dates
)

if perfect_attendance:
    earned_days += 1
```

#### calendar() ì—”ë“œí¬ì¸íŠ¸
**ì¶”ê°€ëœ í•„ë“œ:**
```json
{
  "dates": [
    {
      "date": "2025-12-15",
      "day": 15,
      "is_scheduled_workday": true,  // ìƒˆë¡œ ì¶”ê°€
      "attendance_status": "REGULAR_WORK",  // ìƒˆë¡œ ì¶”ê°€
      "is_worked": true,  // ìƒˆë¡œ ì¶”ê°€
      "record": {...}
    }
  ]
}
```

#### get_cumulative_stats_data() ë©”ì†Œë“œ
**ì¶”ê°€ëœ í†µê³„:**
```json
{
  "total_hours": 160.0,
  "total_earnings": 1600000,
  "total_work_days": 20,
  "regular_work_hours": 144.0,  // ìƒˆë¡œ ì¶”ê°€
  "regular_work_days": 18,  // ìƒˆë¡œ ì¶”ê°€
  "regular_work_earnings": 1440000,  // ìƒˆë¡œ ì¶”ê°€
  "extra_work_hours": 16.0,  // ìƒˆë¡œ ì¶”ê°€
  "extra_work_days": 2,  // ìƒˆë¡œ ì¶”ê°€
  "extra_work_earnings": 160000,  // ìƒˆë¡œ ì¶”ê°€
  "annual_leave_days": 1,  // ìƒˆë¡œ ì¶”ê°€
  "absent_days": 0,  // ìƒˆë¡œ ì¶”ê°€
  "sick_leave_days": 0  // ìƒˆë¡œ ì¶”ê°€
}
```

### 2. í”„ë¡ íŠ¸ì—”ë“œ ì‘ì—… (í–¥í›„ ì‘ì—…)

Phase 2ì—ì„œ ë°±ì—”ë“œëŠ” ì™„ë£Œë˜ì—ˆìœ¼ë‚˜, í”„ë¡ íŠ¸ì—”ë“œ UIëŠ” ì•„ì§ êµ¬í˜„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

#### í•„ìš”í•œ ì‘ì—…:
- [ ] WorkDayModal.vue ê°œì„  (ë‘ ê°€ì§€ ìˆ˜ì • ê²½ë¡œ ë¶„ë¦¬)
- [ ] ì¶œê²° ìƒíƒœ ì„ íƒ UI
- [ ] ì†Œì •ê·¼ë¡œì¼ ì•ˆë‚´ ë¬¸êµ¬
- [ ] ìº˜ë¦°ë” ì‹œê°ì  êµ¬ë¶„

---

## ğŸš€ Phase 3 ê³„íš (í–¥í›„ ì‘ì—…)

í˜„ì¬ Phase 1ì—ì„œëŠ” ë°ì´í„° êµ¬ì¡°ì™€ ê¸°ë³¸ ë¡œì§ë§Œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ë‹¨ê³„ì—ì„œëŠ”:

### 1. í”„ë¡ íŠ¸ì—”ë“œ UI ê°œì„ 
- [ ] WorkDayModalì— "ê·¼ë¬´í‘œ ìˆ˜ì •" / "ì‹¤ì œ ê·¼ë¡œ ìˆ˜ì •" ê²½ë¡œ ë¶„ë¦¬
- [ ] ì¶œê²° ìƒíƒœ ì„ íƒ UI (REGULAR_WORK / EXTRA_WORK / ANNUAL_LEAVE / ABSENT / SICK_LEAVE)
- [ ] ì†Œì •ê·¼ë¡œì¼ ì•ˆë‚´ ë¬¸êµ¬ í‘œì‹œ
- [ ] ìº˜ë¦°ë” ì‹œê°ì  êµ¬ë¶„ (ì†Œì •ê·¼ë¡œì¼ í…Œë‘ë¦¬, ì¶”ê°€ê·¼ë¬´ ìƒ‰ìƒ)

### 2. ê³„ì‚° ë¡œì§ ì—…ë°ì´íŠ¸
- [x] ~~holiday_pay() ì—”ë“œí¬ì¸íŠ¸ - ì†Œì •ê·¼ë¡œì¼ ê°œê·¼ ê¸°ì¤€ìœ¼ë¡œ ë³€ê²½~~ âœ… Phase 2 ì™„ë£Œ
- [x] ~~annual_leave_summary() ì—”ë“œí¬ì¸íŠ¸ - ì†Œì •ê·¼ë¡œì¼ ê°œê·¼ ê¸°ì¤€ìœ¼ë¡œ ë³€ê²½~~ âœ… Phase 2 ì™„ë£Œ
- [x] ~~compute_monthly_schedule_stats() - ì†Œì •ê·¼ë¡œì¼ vs ì¶”ê°€ê·¼ë¬´ êµ¬ë¶„ í†µê³„~~ âœ… Phase 2 ì™„ë£Œ

### 3. í…ŒìŠ¤íŠ¸ ë° ê²€ì¦
- [ ] ì†Œì •ê·¼ë¡œì¼ íŒì • ë¡œì§ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- [ ] ì£¼íœ´ìˆ˜ë‹¹ ê³„ì‚° í†µí•© í…ŒìŠ¤íŠ¸
- [ ] ì—°ì°¨ ë°œìƒ ê³„ì‚° í†µí•© í…ŒìŠ¤íŠ¸
- [ ] ìœ ë™ ìŠ¤ì¼€ì¤„ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸

## ğŸ“ ê´€ë ¨ ë¬¸ì„œ
- [BREAK_TIME_UX_IMPROVEMENT.md](./BREAK_TIME_UX_IMPROVEMENT.md) - íœ´ê²Œì‹œê°„ ì…ë ¥ UX ê°œì„ 
- [OVERNIGHT_WORK_SCHEDULE_FEATURE.md](./OVERNIGHT_WORK_SCHEDULE_FEATURE.md) - ìµì¼ ê·¼ë¬´ ê¸°ëŠ¥
- [SCHEDULE_VS_WORKRECORD_FIX.md](./SCHEDULE_VS_WORKRECORD_FIX.md) - ìŠ¤ì¼€ì¤„/ê¸°ë¡ ìš°ì„ ìˆœìœ„
- [FEATURE_GUIDE.md](./FEATURE_GUIDE.md) - ì „ì²´ ê¸°ëŠ¥ ê°€ì´ë“œ

---

**ì‘ì—… ì™„ë£Œì¼**: 2025-12-20  
**Phase**: 1 (ë°ì´í„° êµ¬ì¡° ë° ê¸°ë³¸ ë¡œì§)  
**ì‘ì„±ì**: GitHub Copilot
